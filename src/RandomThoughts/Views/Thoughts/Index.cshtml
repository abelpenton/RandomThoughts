@using System.Collections
@using Microsoft.EntityFrameworkCore.Infrastructure
@using RandomThoughts.Models
@using RandomThoughts.Models.ThoughtViewModels
@using System.Diagnostics;


@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    var thoughts = Model as IEnumerable<ThoughtIndexViewModel>;
    var rnd = new Random();
}
@await Html.PartialAsync("_ThoughtModal")

<div class="container">
    <div class="row jumbotron">
        <div class="col-md-6">
            <h2>@ViewData["MainTitle"]</h2><small><i>@thoughts.Count() total entries | Created on @ViewData["CreatedAt"] by @ViewData["CreatedBy"]</i></small>
        </div>
        <div class="col-md-6">
            <div class="pull-right">
                <span class="glyphicon glyphicon-cog"></span>
                <span class="glyphicon glyphicon-cloud-download"></span>
                <button id="add-new-thought" type="button" class="btn btn-primary"><span class="glyphicon glyphicon-plus-sign"></span> New Entry</button>
            </div>
         </div>
    </div>
</div>

<div class="container">
    <table class="table table-hover">
        <thead>
            <tr>
                <th>Entry</th>
                <th><span class="pull-right"><i class="glyphicon glyphicon-time"></i> Date Created</span></th>
                <th><span class="pull-right"><i class="glyphicon glyphicon-thumbs-up"></i> Likes</span></th>
                <th><span class="pull-right"><i class="glyphicon glyphicon-eye-open"></i> Views</span></th>
                <th><span class="pull-right"><i class="glyphicon glyphicon-share"></i> Shared</span></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var thought in thoughts)
            {
            <tr>
                <td>
                    <div class="media">
                        <div class="media-left">
                            @{ var imgPath = "/images/avatars/img_avatar" + rnd.Next(0, 7).ToString() + ".png";}
                            <img src="@imgPath" class="media-object" style="width:60px" />
                        </div>
                        <div class="media-right">
                            <h4 class="media-heading">
                                @thought.Title<span class="badge">@thought.NumberComments</span>
                                <small>
                                    <i>by @thought.CreatedBy</i>
                                </small>
                            </h4>
                            <h4><small><i>@thought.Body</i></small></h4>
                        </div>
                    </div>
                </td>
                <td><span class="pull-right">@thought.CreateAtHumanized</span></td>
                <td><span class="pull-right">@thought.Likes</span></td>
                <td><span class="pull-right">@thought.Views</span></td>
                <td><span class="pull-right">Add Visibility</span></td>
            </tr>
            }
        </tbody>
    </table>
</div>


